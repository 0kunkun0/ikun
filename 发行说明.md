# ikun库7.1.2 Preview Build 2026.1.24发行说明
**目标平台Windows, 新增Linux和macOS**
**[本库GitHub仓库](https://github.com/0kunkun0/ikun)**
**此版本GitHub分支: preview**
- 仅供个人, 非营利性组织, 开源项目以及竞赛使用
- 根据GPL 3.0许可证规定, **禁止使用本库进行闭源用途**
---
## 概述
* ikun库是一个跨平台的C++编程工具库, 支持Windows, Linux和macOS系统, 遵循GPL 3.0许可证, 此版本是7.1.2预览版, 预计2026年2月发布正式版
 * 提供了丰富的功能, 包括但不限于:
 文件操作(files.hpp)
 数学运算(maths.hpp)
 随机数生成(random.hpp)
 时间处理(times.hpp)
 错误处理(ikun_stderr.hpp)
 控制台颜色输出(console_color.hpp)
 输入输出整合(io.hpp)
 高精度整数运算(high_precision_digit.hpp)
 C++标准库整合(stdc++lib.hpp)等
 * 允许在开源的情况下向ikun库添加扩展功能, 但必须遵循GPL 3.0许可证规定

* 开发工具方面, 对开发者提供错误分析器(仅限本库的代码)`ikun_error_analyzer.cpp`和库/项目管理工具`ikun_core.cpp`(编译后应为`ikun(.exe)`)

* 法律方面, ikun库遵循GPL 3.0许可证, **禁止使用本库进行闭源用途**
---
## 新增功能
- **新增跨平台支持!**
- **现在可以在Linux和macOS上使用ikun库了!**
- ~~不过在macOS上的支持仍处于实验性~~

- 新增`build.sh`, 用于在Linux和macOS上编译ikun库核心管理器, **在执行前需要先定位到ikun库的根目录, 并`chmod +x ./build.sh`保证脚本可执行**

- 删除`functions.hpp`, 分离`libs`, `maths`, `random_`和`times`命名空间到独立的模块, 方便用户使用, 重命名`libs`命名空间为`files`
 - `#include "ikun/functions.hpp"` -> `#include "ikun/files.hpp"`
 - `#include "ikun/maths.hpp"` -> `#include "ikun/maths.hpp"`
 - `#include "ikun/random.hpp"` -> `#include "ikun/random.hpp"`
 - `#include "ikun/times.hpp"` -> `#include "ikun/times.hpp"`

- 添加`ikun_stderr.hpp`模块, 用于ikun库的错误输出和异常抛出
 - 功能:
  - `ikun_error::throw_re(错误原因, 错误库, 错误函数, 错误代码)`: 抛出运行时错误
  - `ikun_error::throw_inv_arg(错误原因, 错误库, 错误函数, 错误代码)`: 抛出无效参数错误
  - `ikun_error::throw_out_of_range(错误原因, 错误库, 错误函数, 错误代码)`: 抛出超出范围错误
  - `ikun_error::throw_logic_error(错误原因, 错误库, 错误函数, 错误代码)`: 抛出逻辑错误
  - `ikun_error::throw_stack_overflow(错误原因, 错误库, 错误函数, 错误代码)`: 抛出栈溢出错误

- 添加`input.hpp`, 用于更方便的IO操作
 - 功能:
  - `ikun_input::input<输入类型>(输入提示)`从stdin读取一行字符串
  - `ikun_input::input_from_file(文件名, 是否获取整行)`从文件中读取一行字符串
   - 错误类型: `ikun_error::throw_inv_arg`, 错误代码:ikun_input 001, 错误原因: 传入的文件名参数为空
   - 错误类型: `ikun_error::throw_re`, 错误代码:ikun_input 002, 错误原因: 文件不存在
  - `ikun_input::input_from_ss(字符串流, 是否获取整行)`从字符串流读取一行字符串
 
- 添加`io.hpp`, 提供`input.hpp`和 C++23 `print`的统一接口

- 添加`ikun_error_analyzer.cpp`, 用于分析ikun库的错误信息
 - 使用build.bat/build.sh/build_lib.py进行编译

- 添加`console_color.hpp`, 提供ANSI转义序列控制台颜色输出
 - 功能:
  - `color::颜色` 转义序列, 目前仅支持red, green, yellow, blue, cyan, purple, white, black, bold和reset
 - 使用方法:
  - `std::cout << color::red << "红色文本" << color::reset << "默认文本";`
  - `std::print("{}红色文本{}默认文本", color::red, color::reset);`

- `ikun_core.cpp`中, 输出C++版本的信息优化, 现在可直接输出C++版本而不是__cplusplus宏

- `build_lib.py`中, 新增为Linux和macOS编译ikun库核心管理器的功能
- `build_lib.py`中, 新增了下载错误分析器和标准错误库的功能(`ikun_core.cpp`依赖项)

- GitHub仓库中新增预编译的Windows/Linux可执行文件, 方便在某些无编译器(这不太可能)的环境下使用
---
## 优化
- 删除`github.hpp`, 将在后来版本优化后回归
- 优化`high_precision_digit.hpp`, 加快高精度数字的运算速度
- 将`ikun_core.cpp`中依赖`github.hpp`的函数优化后加入`ikun_core.cpp`, 降低不必要的外部依赖
- 为了更好的错误处理, 在`ikun_core.cpp`中添加`ikun_stderr.hpp`的依赖

- 优化`ikun_core.cpp`的条件编译和判断宏, 更正名称:
 - `LLVM Clang`             -> `Clang/LLVM Compiler`
 - `GNU C Compiler`         -> `GNU Compiler Collection`
 - `Microsoft Visual C++`   -> `Microsoft Visual C++ Compiler`
 - `Windows` -> `Windows x64`和`Windows x86`
 - `Linux` -> `Linux x86_64`和`Linux x86`
 - `Apple macOS` -> `Apple macOS x86_64`和`Apple macOS ARM64E`, 并把此时的`Clang/LLVM Compiler`更正为`Apple Clang/LLVM Compiler`
- 移除`ikun_core.cpp`中平台必须为`Windows x64`的条件编译, 支持Linux和macOS
- 优化`ikun_core.cpp`, 使其判断版本的输出变为C++xx而不是原来的__cplusplus宏
 - 如: 现在输出为`C++26`而不是原来的`202400`

- 优化`build_lib.py`, 使其可以支持Linux和macOS
---
## 修复的bug
- 修复7.1.1版本库管理器的代码标识符错误
 - 全平台
- 修复库管理器从GitHub仓库下载模块时的**cURL的证书错误**
 - 全平台
- 修复`build_lib.py`下载模块时的**cURL的证书错误**
 - 全平台
- 修复`ikun_core.cpp`中, **库最低版本设置为202303L的错误**(正确的C++23标准应为202302L, 导致7.1.1版本必须手动修改代码或使用C++26标准才可编译)
 - 全平台
- 修复使用MSVC编译器编译时的一些奇奇怪怪的问题(7.1.1版本开发时使用Clang编译器, 而MSVC的语法要求比Clang更严格)
 - Windows x64
- 修复MSVC下__cplusplus宏错误的问题(MSVC默认不更新__cplusplus宏, 已通过#define __cplusplus MSVC_LANG修复)
 - Windows x64
- 修复`ikun_core.cpp`中`ikun -ll`功能不会输出的bug(作者没意识到列出的文件会被存在函数返回值里, 而不是直接输出)
 - 全平台
---
## 当前已知的bug
- 在Release版本发布之前, 开发团队无法测试`ikun_core.cpp`的`ikun -i`功能, 如此处有bug, 将在Release临时补丁中修复
 - 全平台

- (可能是作者的问题, 因为WSL默认不带浏览器, 也可能只是WSL版Kali Linux的问题)在Linux上使用`ikun_core.cpp`时, `ikun -l`无法运行
 - Windows Subsystem for Linux x86_64

- (可能是作者环境没配置好)在Linux上使用`build_lib.py`时, 使用Clang作为编译器时提示`fatal error: 'print' file not found`, 作者认为是环境没配好, 因为当前版本的`build_lib.py`中编译命令指定的是C++26标准, 而且GCC可以正常编译
 - Linux x86
 - Linux x86_64
 - **如果你的设备上可以用Clang编译成功, 请忽略本条**

- (macOS)(All Architecture)(作者的问题, 因为作者没有Mac电脑)作者无法测试macOS上的任何功能, 作者正在尝试使用虚拟机, 将在7.1.3版本发布前修复(不过由于macOS兼容POSIX标准, 所以作者认为这个问题不大), 如果**你使用macOS并发现bug, 请联系作者**
 - macOS x86_64
 - macOS ARM64E
---
## 目前7.1.2版本开发阶段:
- 2025.12.21: 正式开始制作
- 2025.12.22: 完成新版库管理器开发和测试
- 2025.12.23~27: 作者生病了, 歇几天
- 2025.12.28: 作者活了, 添加`ikun_stderr.hpp`模块和部分Linux/macOS支持
- 2025.12.31: 新增`build.sh`, 优化`ikun_core.cpp`的条件编译和判断宏, 更正名称
- 2026.1.1: 元旦了, 歇几天
- 2026.1.4: 新增`input.hpp`, `io.hpp`, `console_color.hpp`模块
- 2026.1.5: 优化`high_precision_digit.hpp`, 添加`ikun_error_analyzer.cpp`, 优化`ikun_core.cpp`中输出C++版本的信息
- 2026.1.6: 发布7.1.2 Developer Preview Build 2026.1.6(开发者预览版, 功能不稳定, 部分功能不完善)
- 2026.1.21: 继续开发
- 2026.1.22: 新增`ikun_error_analyzer.cpp`的编译功能, 优化`ikun_core.cpp`中依赖`github.hpp`的函数优化后加入`ikun_core.cpp`, 降低不必要的外部依赖
- 2026.1.23: 优化`ikun_core.cpp`的条件编译和判断宏, 更正名称, 移除`ikun_core.cpp`中平台必须为`Windows x64`的条件编译, 支持Linux和macOS, 修复`times.hpp`某些情况必须依赖Windows API的问题, 添加Linux/macOS兼容方案
- 2026.1.24: 发布7.1.2 Preview Build 2026.1.24(功能基本稳定)
- 预计:
 - 2026.2.1: 发布7.1.2 Stable Build 2026.2(正式版)
---
*备注: 由于7.1.1版本的不稳定性, 此预览版建议所有用户更新, 由于新版的`ikun_core.cpp`新增了依赖项, 请从 https://github.com/0kunkun0/ikun/tree/preview 下载新版的`build.bat/.sh`和`build_lib.py`, 运行`build_lib.py`更新并编译新版的ikun库核心管理器*